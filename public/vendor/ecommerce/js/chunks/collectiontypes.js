webpackJsonp([23],{"G/BA":function(e,t,l){(e.exports=l("FZ+f")(!1)).push([e.i,"",""])},OVnF:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=l("GzQy"),n=(i=o)&&i.__esModule?i:{default:i};var a=l("qyFY");t.default={name:"ViewCollectionType",components:{Errors:function(){return l.e(28).then(l.bind(null,"DqGP"))},FilePickerModal:function(){return l.e(30).then(l.bind(null,"kSKK"))},ContentComponent:function(){return l.e(32).then(l.bind(null,"6S5T"))}},props:{collectionId:{type:String,required:!0},editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"],["link","video"]]}},typeId:{type:String,required:!0}},data:function(){return{loading:!1,collectionTypeErrors:{},collectionType:{}}},computed:{typeName:function(){return this.collectionType.individual_name?this.collectionType.individual_name.toLowerCase():"collection type"},collectionTypeFormRules:function(){return{name:[{required:!0,message:"The "+this.typeName+" name field is required",trigger:"blur"}],individual_name:[{required:!0,message:"The "+this.typeName+" individual name field is required",trigger:"blur"}],slug:[{required:!0,message:"The "+this.typeName+" slug field is required",trigger:"blur"}]}}},watch:{},mounted:function(){this.getCollectionType()},methods:{objectHas:function(e,t){return a(e,t)},getCollectionType:function(){this.loading=!0,this.collectionTypeErrors={},n.default.get({path:"collections/"+this.collectionId+"/types/"+this.typeId,params:{with:["collection","media","content"],include:["individual_name","slug","live_at"]}}).then(function(e){this.loading=!1,this.collectionType=e.data,this.collectionType.meta.options&&this.collectionType.meta.options.forEach(function(e){e.value.forEach(function(e){!0===e.value.__fileDialogOpen&&(e.value.__fileDialogOpen=!1)}.bind(this))}.bind(this))}.bind(this)).catch(function(e){this.loading=!1,this.collectionTypeErrors=e}.bind(this))},submitForm:function(e){var t=this;this.collectionTypeErrors={},this.collectionType.with=["collection","media","content"],this.collectionType.include=["individual_name","slug","live_at"],this.loading=!0,this.$refs[e].validate(function(e){if(!e)return t.loading=!1,!1;n.default.persist("put",{path:"collections/"+t.collectionId+"/types/"+t.typeId,object:t.collectionType}).then(function(e){this.loading=!1,this.collectionType=e.data,this.$message({message:this.collectionType.name+" updated",type:"success",showClose:!0})}.bind(t)).catch(function(e){this.collectionTypeErrors=e,this.loading=!1}.bind(t))})},displayFilePicker:function(e){this.$refs[e]&&this.$refs[e].openModal()},handleFilesChosen:function(e){this.$set(this.collectionType,e.id,e.files)},handleFilesUnChosen:function(e){this.$set(this.collectionType,e.id,e.files)},handleOptionFilesChosen:function(e){var t=this.collectionType.meta.options.indexOf(e.id.option);this.collectionType.meta.options[t].values[this.collectionType.meta.options[t].values.indexOf(e.id.value)].value.file=e.files[0]},handleOptionFilesUnChosen:function(e){var t=this.collectionType.meta.options.indexOf(e.id.option);this.collectionType.meta.options[t].values[this.collectionType.meta.options[t].values.indexOf(e.id.value)].value.file=e.files},addSpecification:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t={value:""}),this.collectionType.meta[e]||this.$set(this.collectionType.meta,e,[]),this.collectionType.meta[e].push({key:"",values:[t]})},addSpecificationValue:function(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l||(l={value:""}),this.collectionType.meta[t][this.collectionType.meta[t].indexOf(e)].values.push(l)}}}},UM7q:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.collectionType.collection?l("el-breadcrumb",{staticClass:"breadcrumbs",attrs:{"separator-class":"el-icon-arrow-right"}},[l("el-breadcrumb-item",{attrs:{to:{name:"collections"}}},[e._v("Collections")]),e._v(" "),l("el-breadcrumb-item",{attrs:{to:{name:"collections.view",params:{collectionId:e.collectionType.collection.id.toString()}}}},[e._v(e._s(e.collectionType.collection.name))]),e._v(" "),l("el-breadcrumb-item",[e._v(e._s(e.collectionType.name))])],1):e._e(),e._v(" "),l("el-row",{attrs:{align:"middle",type:"flex"}},[l("el-col",{attrs:{span:12}},[l("h1",{staticClass:"page_title"},[e._v(e._s(e.collectionType.name))])])],1),e._v(" "),Object.keys(e.collectionTypeErrors).length>0?l("errors",{attrs:{errors:e.collectionTypeErrors}}):e._e(),e._v(" "),l("el-row",{attrs:{type:"flex"}},[l("el-col",{attrs:{md:24}},[l("el-form",{ref:"collectionTypeForm",attrs:{"label-position":"top",model:e.collectionType,rules:e.collectionTypeFormRules,"label-width":"120px"}},[l("el-row",{attrs:{type:"flex"}},[l("el-col",{attrs:{span:24}},[e.collectionType.live_at?l("el-form-item",{attrs:{label:"Live",prop:"live_at.live"}},[l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.collectionType.live_at.live,callback:function(t){e.$set(e.collectionType.live_at,"live",t)},expression:"collectionType.live_at.live"}})],1):e._e()],1)],1),e._v(" "),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{lg:8,md:12,sm:24}},[l("el-form-item",{attrs:{label:"Name",prop:"name"}},[l("el-input",{attrs:{autofocus:!0},model:{value:e.collectionType.name,callback:function(t){e.$set(e.collectionType,"name",t)},expression:"collectionType.name"}})],1)],1),e._v(" "),l("el-col",{attrs:{lg:8,md:12,sm:24}},[l("el-form-item",{attrs:{label:"Individual Name",prop:"individual_name"}},[l("el-input",{model:{value:e.collectionType.individual_name,callback:function(t){e.$set(e.collectionType,"individual_name",t)},expression:"collectionType.individual_name"}})],1)],1),e._v(" "),l("el-col",{attrs:{lg:8,md:24}},[l("el-form-item",{attrs:{label:"Slug / Url",prop:"slug"}},[l("el-input",{model:{value:e.collectionType.slug,callback:function(t){e.$set(e.collectionType,"slug",t)},expression:"collectionType.slug"}},[l("template",{slot:"prepend"},[e._v(e._s(e.getSiteBaseURL)+e._s(this.collectionType.collection?this.collectionType.collection.slug:"")+"/")])],2)],1)],1)],1),e._v(" "),e.collectionType.content?l("el-row",{attrs:{gutter:20}},[e.collectionType.content?l("content-component",{attrs:{content:e.collectionType.content}}):e._e()],1):e._e(),e._v(" "),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{md:6}},[l("el-form-item",{attrs:{label:"Main Img",prop:"main_img"}},[e.objectHas(e.collectionType,"main_img")?l("file-picker-modal",{ref:"filePickerMain",attrs:{"show-btn":!0,"current-files":e.collectionType.main_img?[e.collectionType.main_img]:void 0,name:"Main Img",selectable:1,"picker-id":"main_img","open-on-mount":!1},on:{filesChosen:e.handleFilesChosen,filesUnChosen:e.handleFilesUnChosen}}):e._e()],1)],1),e._v(" "),l("el-col",{attrs:{md:6}},[l("el-form-item",{attrs:{label:"Secondary Img",prop:"secondary_img"}},[e.objectHas(e.collectionType,"secondary_img")?l("file-picker-modal",{ref:"filePickerSecondary",attrs:{"show-btn":!0,"current-files":e.collectionType.secondary_img?[e.collectionType.secondary_img]:void 0,name:"Secondary Img",selectable:1,"picker-id":"secondary_img","open-on-mount":!1},on:{filesChosen:e.handleFilesChosen,filesUnChosen:e.handleFilesUnChosen}}):e._e()],1)],1),e._v(" "),l("el-col",{attrs:{md:6}},[l("el-form-item",{attrs:{label:"Third Img",prop:"third_img"}},[e.objectHas(e.collectionType,"third_img")?l("file-picker-modal",{ref:"filePickerThird",attrs:{"show-btn":!0,"current-files":e.collectionType.third_img?[e.collectionType.third_img]:void 0,name:"Third Img",selectable:1,"picker-id":"third_img","open-on-mount":!1},on:{filesChosen:e.handleFilesChosen,filesUnChosen:e.handleFilesUnChosen}}):e._e()],1)],1)],1),e._v(" "),e.collectionType.meta?l("el-row",{attrs:{gutter:20}},[e._l(e.collectionType.meta.specifications,function(t){return[l("el-col",{attrs:{md:12}},[l("el-form-item",{attrs:{label:"Specification",prop:"key"}},[l("el-input",{attrs:{autofocus:!0},model:{value:t.key,callback:function(l){e.$set(t,"key",l)},expression:"spec.key"}})],1)],1),e._v(" "),l("el-col",{attrs:{md:12}},[e._l(t.values,function(t){return[l("el-form-item",{attrs:{label:"Specification Value",prop:"value"}},[l("el-input",{attrs:{autofocus:!0},model:{value:t.value,callback:function(l){e.$set(t,"value",l)},expression:"value.value"}})],1)]}),e._v(" "),l("el-button",{attrs:{type:"primary",plain:""},on:{click:function(l){e.addSpecificationValue(t,"specifications")}}},[e._v("Add Specification Value")])],2)]}),e._v(" "),l("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.addSpecification("specifications")}}},[e._v("Add Specification")])],2):e._e(),e._v(" "),e.collectionType.meta?l("el-row",{attrs:{gutter:20}},[e._l(e.collectionType.meta.options,function(t){return[l("el-col",{attrs:{md:12}},[l("el-form-item",{attrs:{label:"Option Type",prop:"key"}},[l("el-input",{attrs:{autofocus:!0},model:{value:t.key,callback:function(l){e.$set(t,"key",l)},expression:"option.key"}})],1)],1),e._v(" "),l("el-col",{attrs:{md:12}},[e._l(t.values,function(i,o){return[l("el-col",{attrs:{md:12}},[l("el-form-item",{attrs:{label:"Option Name",prop:"name"}},[l("el-input",{attrs:{autofocus:!0},model:{value:i.value.name,callback:function(t){e.$set(i.value,"name",t)},expression:"value.value.name"}})],1)],1),e._v(" "),l("el-col",{attrs:{md:12}},[l("el-form-item",{attrs:{label:"Option Text",prop:"text"}},[l("el-input",{attrs:{autofocus:!0},model:{value:i.value.text,callback:function(t){e.$set(i.value,"text",t)},expression:"value.value.text"}})],1)],1),e._v(" "),l("el-col",{attrs:{md:24}},[l("el-form-item",{attrs:{label:"Option File",prop:"file"}},[i.value?l("file-picker-modal",{ref:"metaOptionFile_"+o,refInFor:!0,attrs:{"current-files":i.value.file?[i.value.file]:void 0,name:i.value.name,selectable:1,"show-btn":!0,"picker-id":{option:t,value:i},"open-on-mount":!1},on:{filesChosen:e.handleOptionFilesChosen,filesUnChosen:e.handleOptionFilesUnChosen}}):e._e()],1)],1)]}),e._v(" "),l("el-button",{attrs:{type:"primary",plain:""},on:{click:function(l){e.addSpecificationValue(t,"options",{value:{name:"",file:null}})}}},[e._v("Add Option Value")])],2)]}),e._v(" "),l("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.addSpecification("options",{value:{name:"",file:null,__fileDialogOpen:!1}})}}},[e._v("Add Option")])],2):e._e(),e._v(" "),e.collectionType.meta?l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{md:8}},[l("el-form-item",{attrs:{label:"Featured Color",prop:"meta.featured_colour"}},[l("el-color-picker",{model:{value:e.collectionType.meta.featured_colour,callback:function(t){e.$set(e.collectionType.meta,"featured_colour",t)},expression:"collectionType.meta.featured_colour"}})],1)],1)],1):e._e(),e._v(" "),l("hr",{staticClass:"page_hr"}),e._v(" "),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{sm:24}},[l("el-form-item",[l("el-button",{attrs:{plain:"",type:"success",loading:e.loading},on:{click:function(t){e.submitForm("collectionTypeForm")}}},[e._v("Update")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]}},aEyW:function(e,t,l){var i=l("G/BA");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);l("rjj0")("7d953e7c",i,!0,{})},jkeM:function(e,t,l){var i=l("VU/8")(l("OVnF"),l("UM7q"),!1,function(e){l("aEyW")},null,null);e.exports=i.exports}});